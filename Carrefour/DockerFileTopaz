
#FROM quay.io/wildfly/wildfly:26.0.1.Final
FROM jboss/wildfly:10.1.0.Final
USER root
# Expose the ports in which we're interested
EXPOSE 8080

VOLUME /topaz/modules/ /opt/jboss/wildfly/modules/
VOLUME /topaz/standalone/ /opt/jboss/wildfly/standalone/

RUN mkdir /opt/jboss/wildfly/standalone/log \
&& chmod +x /opt/jboss/wildfly/bin/runtopaz.sh \
&& chown -R jboss:0 /opt/jboss/wildfly \
&& chmod -R g+rw /opt/jboss/wildfly \
&& chmod 777 /opt/jboss/wildfly/bin/runtopaz.sh

# Set the default command to run on boot
CMD ["/opt/jboss/wildfly/bin/runtopaz.sh"]

